<section id="widget-grid" class="">
	<div class="row">
		<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			<div class="jarviswidget jarviswidget-color-blueDark" id="wid-id-0" data-widget-editbutton="false">
				<header>
					<span class="widget-icon"><i class="fa fa-table"></i></span>
					<h2>角色管理</h2>
				</header>
				<div>
					<div class="jarviswidget-editbox"></div>
					<div class="widget-body ">
						<div style="float:left;overflow-x:auto;" id="department-tree" class="ztree">
							
						</div>
					
						<div class="table-responsive" style="margin-left:200px;">
							<table class="table table-bordered" id="main-table">
								
							</table>
						</div>

						<input id="page-num" type="hidden" value="1" /> 
						<input id="page-size" type="hidden" value="10" />
						<ul id="pager" class="pagination"></ul>
					</div>
					<!-- end widgetContent -->

				</div>
				<!-- end jarvisWidgetBody -->

			</div>
			<!-- end widget -->
			<!-- end jarvisWidget -->

		</article>
		<!-- end widgetGridCol -->

	</div>
	<!-- end widgetGridRow -->

</section>
<!-- end widgetGrid -->

<script id="authorities_tpl" type="text/html">
<form action="" id="authority-form" class="smart-form" novalidate="novalidate" style="overflow-x: hidden;" onsubmit="return false;">
	<fieldset>
		<div class="row">
			<input type="hidden" id="roleId" name="roleId" value="{{role.id}}">
			{{each authority as value i}}
				<label class="input col col-4"> 
					<label class="checkbox">
						<input id="authorityIds" name="authorityIds" type="checkbox" placeholder="" value="{{value.id}}" {{if role.authorityIds != null &&(role.authorityIds.indexOf(value.id.toString()) >= 0 || role.authorityIds.indexOf(value.id) >= 0)}}checked{{/if}}>
						<i></i> {{value.name}} 
					</label>
				</label>
			{{/each}}
		</div>
	</fieldset>
	<footer>
		<button type="button" class="btn"onClick="layer.close(layer.index);">取消</button>
		<button type="submit" class="btn btn-primary" onClick="Role.UpdateAuthority($('#authority-form').serialize())">保存</button>
	</footer>
</form>
</script>

<script src="js/auth/role.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	$('#department-tree').departmentZtree({'callback':zTreeOnClick});
});
function zTreeOnClick(event, treeId, treeNode) {
	Role.List({'departmentId':treeNode.id});
}
</script>